<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>{{ user.prenom }} {{ user.nom }} - Profil</title>
    {% load static %}
    <link rel="stylesheet" href="{% static 'css/styles.css' %}">
    <link rel="stylesheet" href="{% static 'css/profile.css' %}">
    <style>
        .modal { display: none; position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: rgba(0,0,0,0.5); justify-content: center; align-items: center; z-index: 1000; }
        .modal.active { display: flex; }
        .modal-content { background: white; padding: 30px; border-radius: 12px; width: 90%; max-width: 500px; }
        .form-group { margin-bottom: 15px; }
        .form-group label { display: block; margin-bottom: 5px; font-weight: 600; }
        .form-group input, .form-group select { width: 100%; padding: 10px; border: 1px solid #ddd; border-radius: 6px; }
        .modal-actions { display: flex; justify-content: flex-end; gap: 10px; margin-top: 20px; }
    </style>
</head>
<body>
    <!-- Header -->
    <header class="header">
        <div class="container">
            <div class="header-content">
                <!-- Logo -->
                <div class="logo-section">
                    <img src="{% static 'public/toonice-logo.png' %}" alt="TooNice Logo" class="logo">
                    <span class="brand-name">TooNice</span>
                </div>

                <!-- Desktop Navigation -->
                <nav class="nav-desktop">
                    <a href="{% url 'index_auth' %}" class="nav-link">Home</a>
                    <a href="#" class="nav-link">Destinations</a>
                    <a href="#" class="nav-link">Experiences</a>
                    <a href="#" class="nav-link">About</a>
                </nav>

                <!-- Profile Menu -->
                <div class="profile-menu">
                    <button class="profile-btn" id="profileBtn">
                        <img src="{% static 'public/usericon.png' %}" alt="Profile" class="profile-avatar">
                        <span>{{ user.prenom }} {{ user.nom }}</span>
                    </button>
                    <div class="dropdown-menu" id="dropdownMenu">
                        <a href="{% url 'profile' %}" class="dropdown-link">My Profile</a>
                        <a href="#" class="dropdown-link">My Bookings</a>
                        <a href="#" class="dropdown-link">Settings</a>
                        <hr class="dropdown-divider">
                        <a href="{% url 'logout' %}" class="dropdown-link logout">Sign Out</a>
                    </div>
                </div>

                <!-- Mobile Menu Button -->
                <button class="menu-toggle" id="menuToggle">
                    <span></span>
                    <span></span>
                    <span></span>
                </button>
            </div>

            <!-- Mobile Navigation -->
            <nav class="nav-mobile" id="mobileNav">
                <a href="{% url 'index_auth' %}" class="nav-link-mobile">Home</a>
                <a href="#" class="nav-link-mobile">Destinations</a>
                <a href="#" class="nav-link-mobile">Experiences</a>
                <a href="#" class="nav-link-mobile">About</a>
                <a href="{% url 'logout' %}" class="nav-link-mobile">Sign Out</a>
            </nav>
        </div>
    </header>

    <!-- Main Content -->
    <main class="main-content">
        <div class="container">
            <!-- Profile Header -->
            <div class="profile-header">
                <div class="profile-cover"></div>
                <div class="profile-info">
                    <img src="{% static 'public/usericon.png' %}" alt="Profile Picture" class="profile-pic">
                    <div class="profile-details">
                        <h1>{{ user.prenom }} {{ user.nom }}</h1>
                        <p class="member-since">Membre depuis {{ user.date_joined|date:"F Y" }}</p>
                        <div class="profile-stats">
                            <div class="stat">
                                <p class="stat-value">0</p>
                                <p class="stat-label">Voyages terminés</p>
                            </div>
                            <div class="stat">
                                <p class="stat-value">1</p>
                                <p class="stat-label">Pays visité</p>
                            </div>
                            <div class="stat">
                                <p class="stat-value">—</p>
                                <p class="stat-label">Note moyenne</p>
                            </div>
                        </div>
                    </div>
                    <button class="btn btn-primary edit-profile-btn" id="editProfileBtn">Modifier le profil</button>
                </div>
            </div>

            <!-- Profile Content -->
            <div class="profile-content">
                <!-- Left Column -->
                <div class="profile-left">
                    <!-- Personal Information -->
                    <section class="profile-section">
                        <h2>Informations personnelles</h2>
                        <div class="info-group">
                            <div class="info-item">
                                <label>Nom complet</label>
                                <p>{{ user.prenom }} {{ user.nom }}</p>
                            </div>
                            <div class="info-item">
                                <label>Adresse email</label>
                                <p>{{ user.email }}</p>
                            </div>
                        </div>
                        <div class="info-group">
                            <div class="info-item">
                                <label>Date de naissance</label>
                                <p>{{ user.date_naissance|date:"d F Y" }}</p>
                            </div>
                            
                        </div>
                    </section>

                    <!-- Address Information -->
                    <section class="profile-section">
                        <h2>Adresse</h2>
                        <div class="info-group">
                            <div class="info-item full-width">
                                <label>Adresse complète</label>
                                <p>{{ user.adresse }}</p>
                            </div>
                        </div>
                       
                        <div class="info-group">
                        
                            <div class="info-item">
                                <label>Pays</label>
                                <p>{{ user.pays }}</p>
                            </div>
                        </div>
                    </section>

                   
                </div>

                <!-- Right Column -->
                <div class="profile-right">
                    <!-- Quick Actions -->
                    <section class="profile-section">
                        <h2>Actions rapides</h2>
                        <div class="actions-grid">
                            <a href="#" class="action-card">
                                <div class="action-icon">Plane</div>
                                <p>Mes réservations</p>
                            </a>
                            <a href="#" class="action-card">
                                <div class="action-icon">Heart</div>
                                <p>Liste d'envies</p>
                            </a>
                            <a href="#" class="action-card">
                                <div class="action-icon">Star</div>
                                <p>Avis</p>
                            </a>
                            <a href="#" class="action-card">
                                <div class="action-icon">Lock</div>
                                <p>Sécurité</p>
                            </a>
                        </div>
                    </section>

                    <!-- Recent Activity -->
                    <section class="profile-section">
                        <h2>Activité récente</h2>
                        <div class="activity-list">
                            <div class="activity-item">
                                <div class="activity-icon">Location</div>
                                <div class="activity-content">
                                    <p class="activity-title">Inscription sur TooNice</p>
                                    <p class="activity-date">Aujourd'hui</p>
                                </div>
                            </div>
                        </div>
                    </section>

                    
                </div>
            </div>
        </div>
    </main>

    <!-- MODAL DE MODIFICATION -->
    <div class="modal" id="editModal">
        <div class="modal-content">
            <h2>Modifier mon profil</h2>
            <form method="post" action="{% url 'update_profile' %}">
                {% csrf_token %}
                <div class="form-group">
                    <label>Name</label>
                    <input type="text" name="prenom" value="{{ user.prenom }}" required>
                </div>
                <div class="form-group">
                    <label>Last Name</label>
                    <input type="text" name="nom" value="{{ user.nom }}" required>
                </div>
                <div class="form-group">
                    <label>Email</label>
                    <input type="email" name="email" value="{{ user.email }}" required>
                </div>
                <div class="form-group">
                    <label>Birthday</label>
                    <input type="date" name="date_naissance" value="{{ user.date_naissance|date:'Y-m-d' }}" required>
                </div>
                <div class="form-group">
                    <label>Country</label>
                    <input type="text" name="pays" value="{{ user.pays }}" required>
                </div>
                <div class="form-group">
                    <label>Adress</label>
                    <input type="text" name="adresse" value="{{ user.adresse }}" required>
                </div>
                
                <div class="modal-actions">
                    <button type="button" class="btn btn-outline" id="closeModal">Annuler</button>
                    <button type="submit" class="btn btn-primary">Sauvegarder</button>
                </div>
            </form>
        </div>
    </div>

    <!-- Footer -->
    <footer class="footer">
        <div class="container">
            <div class="footer-grid">
                <div class="footer-col">
                    <h3>TooNice</h3>
                    <p>Votre compagnon de voyage de confiance pour des expériences inoubliables.</p>
                </div>
                <div class="footer-col">
                    <h4>Explorer</h4>
                    <ul>
                        <li><a href="#">Destinations</a></li>
                        <li><a href="#">Expériences</a></li>
                        <li><a href="#">Conseils voyage</a></li>
                    </ul>
                </div>
                <div class="footer-col">
                    <h4>Entreprise</h4>
                    <ul>
                        <li><a href="#">À propos</a></li>
                        <li><a href="#">Contact</a></li>
                        <li><a href="#">Carrières</a></li>
                    </ul>
                </div>
                <div class="footer-col">
                    <h4>Légal</h4>
                    <ul>
                        <li><a href="#">Confidentialité</a></li>
                        <li><a href="#">Conditions</a></li>
                        <li><a href="#">Cookies</a></li>
                    </ul>
                </div>
            </div>

            <div class="footer-bottom">
                <p>© 2025 TooNice. Tous droits réservés.</p>
                <div class="social-links">
                    <a href="#">Twitter</a>
                    <a href="#">Instagram</a>
                    <a href="#">Facebook</a>
                </div>
            </div>
        </div>
    </footer>

    <script src="{% static 'js/profile.js' %}"></script>
    <script>
        const modal = document.getElementById('editModal');
        const btn = document.getElementById('editProfileBtn');
        const close = document.getElementById('closeModal');

        btn.onclick = () => modal.classList.add('active');
        close.onclick = () => modal.classList.remove('active');
        window.onclick = (e) => { if (e.target === modal) modal.classList.remove('active'); }
    </script>
</body>
</html>